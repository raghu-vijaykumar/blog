<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Builder Pattern | Raghu Vijaykumar</title>
<meta name=keywords content="system-design,software-architecture,patterns,builder"><meta name=description content="The Builder Design Pattern is a creational pattern that provides a way to construct complex objects step by step. Unlike the abstract factory pattern, the builder pattern is more about constructing a single object, rather than families of objects.
Why Use the Builder Pattern? The Builder pattern is particularly useful when:
Complex Object Construction: When an object requires multiple steps to construct, where each step may involve different parts of the object."><meta name=author content="Me"><link rel=canonical href=https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/builder/readme/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.e7c811b1152f0ea0017b0724f2c040700cf8bf84343fd4fd5eca45af82337db9.css integrity="sha256-58gRsRUvDqABewck8sBAcAz4v4Q0P9T9XspFr4Izfbk=" rel="preload stylesheet" as=style><link rel=icon href=https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/builder/readme/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Builder Pattern"><meta property="og:description" content="The Builder Design Pattern is a creational pattern that provides a way to construct complex objects step by step. Unlike the abstract factory pattern, the builder pattern is more about constructing a single object, rather than families of objects.
Why Use the Builder Pattern? The Builder pattern is particularly useful when:
Complex Object Construction: When an object requires multiple steps to construct, where each step may involve different parts of the object."><meta property="og:type" content="article"><meta property="og:url" content="https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/builder/readme/"><meta property="og:image" content="https://raghu-vijaykumar.github.io/blog/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="docs"><meta property="article:published_time" content="2024-08-27T16:55:14+00:00"><meta property="article:modified_time" content="2024-08-27T16:55:14+00:00"><meta property="og:site_name" content="Raghu Vijaykumar"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://raghu-vijaykumar.github.io/blog/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Builder Pattern"><meta name=twitter:description content="The Builder Design Pattern is a creational pattern that provides a way to construct complex objects step by step. Unlike the abstract factory pattern, the builder pattern is more about constructing a single object, rather than families of objects.
Why Use the Builder Pattern? The Builder pattern is particularly useful when:
Complex Object Construction: When an object requires multiple steps to construct, where each step may involve different parts of the object."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Docs","item":"https://raghu-vijaykumar.github.io/blog/docs/"},{"@type":"ListItem","position":2,"name":"Builder Pattern","item":"https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/builder/readme/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Builder Pattern","name":"Builder Pattern","description":"The Builder Design Pattern is a creational pattern that provides a way to construct complex objects step by step. Unlike the abstract factory pattern, the builder pattern is more about constructing a single object, rather than families of objects.\nWhy Use the Builder Pattern? The Builder pattern is particularly useful when:\nComplex Object Construction: When an object requires multiple steps to construct, where each step may involve different parts of the object.","keywords":["system-design","software-architecture","patterns","builder"],"articleBody":"The Builder Design Pattern is a creational pattern that provides a way to construct complex objects step by step. Unlike the abstract factory pattern, the builder pattern is more about constructing a single object, rather than families of objects.\nWhy Use the Builder Pattern? The Builder pattern is particularly useful when:\nComplex Object Construction: When an object requires multiple steps to construct, where each step may involve different parts of the object. Consistent Object Creation: Ensuring that the object is constructed in a valid state, by preventing issues such as missing or incorrectly ordered initialization steps. Readable and Maintainable Code: Breaking down the object construction into simpler, readable steps, rather than a large constructor or a sequence of setters. Example: Building HTML Elements To illustrate the Builder pattern, consider constructing HTML elements, which may involve multiple steps such as opening tags, inserting text, adding child elements, and closing tags.\nBasic Construction (Without Builder) Initially, a simple HTML paragraph or list can be constructed using a basic approach:\nSimple paragraph hello = 'hello' parts = ['', hello, '\n'] print(''.join(parts)) Simple list with words words = ['hello', 'world'] parts = [''] for w in words: parts.append(f' {w}') parts.append('') print('\\n'.join(parts)) This approach works for simple cases but becomes cumbersome as complexity increases, such as when dealing with nested elements or ensuring proper tag closure.\nIntroducing the Builder Pattern To handle more complex scenarios, we introduce the HtmlElement and HtmlBuilder classes.\nHtmlElement Class This class models an HTML element and manages its name, text, and child elements:\nclass HtmlElement: indent_size = 2 def __init__(self, name=\"\", text=\"\"): self.name = name self.text = text self.elements = [] def __str(self): return self.__str(0) def __str(self, indent): lines = [] i = ' ' * (indent * self.indent_size) lines.append(f'{i}\u003c{self.name}\u003e') if self.text: i1 = ' ' * ((indent + 1) * self.indent_size) lines.append(f'{i1}{self.text}') for e in self.elements: lines.append(e.__str(indent + 1)) lines.append(f'{i}\u003c/{self.name}\u003e') return '\\n'.join(lines) @staticmethod def create(name): return HtmlBuilder(name) HtmlBuilder Class The HtmlBuilder class facilitates the construction of HtmlElement objects, handling the creation and management of child elements:\nclass HtmlBuilder: __root = HtmlElement() def __init__(self, root_name): self.root_name = root_name self.__root.name = root_name def add_child(self, child_name, child_text): self.__root.elements.append(HtmlElement(child_name, child_text)) def add_child_fluent(self, child_name, child_text): self.__root.elements.append(HtmlElement(child_name, child_text)) return self def clear(self): self.__root = HtmlElement(name=self.root_name) def __str__(self): return str(self.__root) The add_child_fluent method enables a fluent interface, allowing method chaining for a more readable construction process.\nUsing the Builder Constructing an HTML unordered list () with two list items () can be done as follows:\nOrdinary Builder:\nbuilder = HtmlElement.create('ul') builder.add_child('li', 'hello') builder.add_child('li', 'world') print('Ordinary builder:') print(builder) Fluent Builder:\nbuilder.clear() builder.add_child_fluent('li', 'hello') \\ .add_child_fluent('li', 'world') print('Fluent builder:') print(builder) Advanced Builder Pattern with Multiple Sub-Builders This example demonstrates an advanced usage of the Builder design pattern, where multiple sub-builders are used to construct different parts of a complex object. Specifically, we use the Builder pattern to construct a Person object, which has two distinct aspects: address and employment information. The challenge is to allow the construction of this object using separate builders in a fluent and cohesive manner.\nKey Concepts Sub-Builders: PersonJobBuilder and PersonAddressBuilder are sub-builders that inherit from PersonBuilder. Each sub-builder is responsible for a specific aspect of the Person object. Fluent Interface: The builder methods return self, allowing method chaining. This enables a concise and readable way to build the object, e.g., pb.lives.at(...).in_city(...).works.at(...).as_a(...).build(). Base Builder: PersonBuilder acts as a common interface that initializes a Person object and provides access to the sub-builders via the lives and works properties. Property-Driven Interface: The lives and works properties in PersonBuilder return instances of PersonAddressBuilder and PersonJobBuilder, respectively. This design allows seamless switching between the different aspects of the object being built. class Person: def __init__(self): print(\"Creating an instance of Person\") address self.street_address = None self.postcode = None self.city = None employment info self.company_name = None self.position = None self.annual_income = None def __str__(self) -\u003e str: return ( f\"Address: {self.street_address}, {self.postcode}, {self.city}\\n\" + f\"Employed at {self.company_name} as a {self.position} earning {self.annual_income}\" ) class PersonBuilder: facade def __init__(self, person=None): if person is None: self.person = Person() else: self.person = person @property def lives(self): return PersonAddressBuilder(self.person) @property def works(self): return PersonJobBuilder(self.person) def build(self): return self.person class PersonJobBuilder(PersonBuilder): def __init__(self, person): super().__init__(person) def at(self, company_name): self.person.company_name = company_name return self def as_a(self, position): self.person.position = position return self def earning(self, annual_income): self.person.annual_income = annual_income return self class PersonAddressBuilder(PersonBuilder): def __init__(self, person): super().__init__(person) def at(self, street_address): self.person.street_address = street_address return self def with_postcode(self, postcode): self.person.postcode = postcode return self def in_city(self, city): self.person.city = city return self if __name__ == \"__main__\": pb = PersonBuilder() p = ( pb.lives.at(\"123 London Road\") .in_city(\"London\") .with_postcode(\"SW12BC\") .works.at(\"Fabrikam\") .as_a(\"Engineer\") .earning(123000) .build() ) print(p) Usage The example demonstrates the usage of a PersonBuilder to build a Person object with both address and employment information. The fluent interface allows easy chaining of method calls, and the properties lives and works provide access to the sub-builders for address and employment, respectively.\nThis setup is particularly useful when constructing complex objects that require multiple, distinct building processes, while maintaining a clean and intuitive API for the end user.\nBuilder Pattern Using Inheritance with Open/Closed Principle This example demonstrates an alternative approach to the Builder pattern that leverages inheritance to extend functionality. This approach addresses the violation of the Open/Closed Principle observed in traditional builder patterns, where adding new features requires modifying the original builder class. By using inheritance, new builders can be created that extend the functionality of existing ones without altering the existing code, thereby adhering to the Open/Closed Principle.\nKey Concepts Inheritance-Based Builders: Instead of having multiple sub-builders within a single builder class, each additional piece of functionality is added through inheritance. This method allows you to extend the builder’s capabilities by creating new classes that inherit from existing builders, adding only the necessary functionality. Open/Closed Principle: The Open/Closed Principle states that software entities should be open for extension but closed for modification. In this pattern, once a builder class is created, it does not need to be modified to add new features. Instead, new builder classes are created by inheriting from the existing ones. Fluent Interface: The builder classes use a fluent interface, returning self from methods to allow method chaining. This results in a clear and readable way to construct the Person object. class Person: def __init__(self): self.name = None self.position = None self.date_of_birth = None def __str__(self): return f'{self.name} born on {self.date_of_birth} works as a {self.position}' @staticmethod def new(): return PersonBuilder() class PersonBuilder: def __init__(self): self.person = Person() def build(self): return self.person class PersonInfoBuilder(PersonBuilder): def called(self, name): self.person.name = name return self class PersonJobBuilder(PersonInfoBuilder): def works_as_a(self, position): self.person.position = position return self class PersonBirthDateBuilder(PersonJobBuilder): def born(self, date_of_birth): self.person.date_of_birth = date_of_birth return self if __name__ == '__main__': pb = PersonBirthDateBuilder() me = pb\\ .called('Dmitri')\\ .works_as_a('quant')\\ .born('1/1/1980')\\ .build() print(me) Usage In this example, the Person object is constructed by chaining method calls on a PersonBirthDateBuilder instance, which is the most derived builder in the hierarchy. The inheritance-based approach ensures that each builder in the hierarchy can add specific attributes to the Person object while still allowing all the previously added attributes to be set.\nThis design allows for a flexible and extendable building process. If new attributes or methods are needed in the future, they can be added by simply creating a new builder that inherits from the appropriate existing builder, ensuring that the Open/Closed Principle is maintained throughout the development process.\n","wordCount":"1223","inLanguage":"en","image":"https://raghu-vijaykumar.github.io/blog/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-08-27T16:55:14Z","dateModified":"2024-08-27T16:55:14Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/builder/readme/"},"publisher":{"@type":"Organization","name":"Raghu Vijaykumar","logo":{"@type":"ImageObject","url":"https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://raghu-vijaykumar.github.io/blog/ accesskey=h title="Raghu Vijaykumar (Alt + H)"><img src=https://raghu-vijaykumar.github.io/apple-touch-icon.png alt aria-label=logo height=35>Raghu Vijaykumar</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://raghu-vijaykumar.github.io/blog/about/ title=about><span>about</span></a></li><li><a href=https://raghu-vijaykumar.github.io/blog/docs/ title=docs><span>docs</span></a></li><li><a href=https://raghu-vijaykumar.github.io/blog/posts/ title=posts><span>posts</span></a></li><li><a href=https://raghu-vijaykumar.github.io/blog/sponsor/ title=sponsor><span>sponsor</span></a></li><li><a href=https://raghu-vijaykumar.github.io/blog/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://raghu-vijaykumar.github.io/blog/>Home</a>&nbsp;»&nbsp;<a href=https://raghu-vijaykumar.github.io/blog/docs/>Docs</a></div><h1 class="post-title entry-hint-parent">Builder Pattern</h1><div class=post-meta><span title='2024-08-27 16:55:14.973597772 +0000 UTC'>August 27, 2024</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1223 words&nbsp;·&nbsp;Me</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#why-use-the-builder-pattern>Why Use the Builder Pattern?</a></li><li><a href=#example-building-html-elements>Example: Building HTML Elements</a><ul><li><a href=#introducing-the-builder-pattern>Introducing the Builder Pattern</a></li></ul></li><li><a href=#advanced-builder-pattern-with-multiple-sub-builders>Advanced Builder Pattern with Multiple Sub-Builders</a><ul><li><a href=#key-concepts>Key Concepts</a></li><li><a href=#usage>Usage</a></li></ul></li><li><a href=#builder-pattern-using-inheritance-with-openclosed-principle>Builder Pattern Using Inheritance with Open/Closed Principle</a><ul><li><a href=#key-concepts-1>Key Concepts</a></li><li><a href=#usage-1>Usage</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>The Builder Design Pattern is a creational pattern that provides a way to construct complex objects step by step. Unlike the abstract factory pattern, the builder pattern is more about constructing a single object, rather than families of objects.</p><h2 id=why-use-the-builder-pattern>Why Use the Builder Pattern?<a hidden class=anchor aria-hidden=true href=#why-use-the-builder-pattern>#</a></h2><p>The Builder pattern is particularly useful when:</p><ul><li><strong>Complex Object Construction</strong>: When an object requires multiple steps to construct, where each step may involve different parts of the object.</li><li><strong>Consistent Object Creation</strong>: Ensuring that the object is constructed in a valid state, by preventing issues such as missing or incorrectly ordered initialization steps.</li><li><strong>Readable and Maintainable Code</strong>: Breaking down the object construction into simpler, readable steps, rather than a large constructor or a sequence of setters.</li></ul><h2 id=example-building-html-elements>Example: Building HTML Elements<a hidden class=anchor aria-hidden=true href=#example-building-html-elements>#</a></h2><p>To illustrate the Builder pattern, consider constructing HTML elements, which may involve multiple steps such as opening tags, inserting text, adding child elements, and closing tags.</p><p>Basic Construction (Without Builder)
Initially, a simple HTML paragraph or list can be constructed using a basic approach:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl> <span class=n>Simple</span> <span class=n>paragraph</span>
</span></span><span class=line><span class=cl><span class=n>hello</span> <span class=o>=</span> <span class=s1>&#39;hello&#39;</span>
</span></span><span class=line><span class=cl><span class=n>parts</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;&lt;p&gt;&#39;</span><span class=p>,</span> <span class=n>hello</span><span class=p>,</span> <span class=s1>&#39;&lt;/p&gt;&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>parts</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=n>Simple</span> <span class=nb>list</span> <span class=k>with</span> <span class=n>words</span>
</span></span><span class=line><span class=cl><span class=n>words</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;hello&#39;</span><span class=p>,</span> <span class=s1>&#39;world&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>parts</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;&lt;ul&gt;&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>w</span> <span class=ow>in</span> <span class=n>words</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>parts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;  &lt;li&gt;</span><span class=si>{</span><span class=n>w</span><span class=si>}</span><span class=s1>&lt;/li&gt;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>parts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s1>&#39;&lt;/ul&gt;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>parts</span><span class=p>))</span>
</span></span></code></pre></div><p>This approach works for simple cases but becomes cumbersome as complexity increases, such as when dealing with nested elements or ensuring proper tag closure.</p><h3 id=introducing-the-builder-pattern>Introducing the Builder Pattern<a hidden class=anchor aria-hidden=true href=#introducing-the-builder-pattern>#</a></h3><p>To handle more complex scenarios, we introduce the <code>HtmlElement</code> and <code>HtmlBuilder</code> classes.</p><p><code>HtmlElement</code> Class
This class models an HTML element and manages its name, text, and child elements:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>HtmlElement</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>indent_size</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=s2>&#34;&#34;</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=s2>&#34;&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=n>text</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>elements</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>__str</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>__str</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>__str</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>indent</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>lines</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=n>i</span> <span class=o>=</span> <span class=s1>&#39; &#39;</span> <span class=o>*</span> <span class=p>(</span><span class=n>indent</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>indent_size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>lines</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s1>&lt;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s1>&gt;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>text</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>i1</span> <span class=o>=</span> <span class=s1>&#39; &#39;</span> <span class=o>*</span> <span class=p>((</span><span class=n>indent</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>indent_size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>lines</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>i1</span><span class=si>}{</span><span class=bp>self</span><span class=o>.</span><span class=n>text</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>e</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>elements</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>lines</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>e</span><span class=o>.</span><span class=n>__str</span><span class=p>(</span><span class=n>indent</span> <span class=o>+</span> <span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>lines</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s1>&lt;/</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s1>&gt;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>lines</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@staticmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create</span><span class=p>(</span><span class=n>name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>HtmlBuilder</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
</span></span></code></pre></div><p><code>HtmlBuilder</code> Class
The HtmlBuilder class facilitates the construction of <code>HtmlElement</code> objects, handling the creation and management of child elements:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>HtmlBuilder</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>__root</span> <span class=o>=</span> <span class=n>HtmlElement</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>root_name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>root_name</span> <span class=o>=</span> <span class=n>root_name</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__root</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>root_name</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add_child</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>child_name</span><span class=p>,</span> <span class=n>child_text</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__root</span><span class=o>.</span><span class=n>elements</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>HtmlElement</span><span class=p>(</span><span class=n>child_name</span><span class=p>,</span> <span class=n>child_text</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add_child_fluent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>child_name</span><span class=p>,</span> <span class=n>child_text</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__root</span><span class=o>.</span><span class=n>elements</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>HtmlElement</span><span class=p>(</span><span class=n>child_name</span><span class=p>,</span> <span class=n>child_text</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>clear</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__root</span> <span class=o>=</span> <span class=n>HtmlElement</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>root_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__root</span><span class=p>)</span>
</span></span></code></pre></div><p>The add_child_fluent method enables a fluent interface, allowing method chaining for a more readable construction process.</p><p>Using the Builder
Constructing an HTML unordered list (<code>&lt;ul></code>) with two list items (<code>&lt;li></code>) can be done as follows:</p><p>Ordinary Builder:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>builder</span> <span class=o>=</span> <span class=n>HtmlElement</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=s1>&#39;ul&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>builder</span><span class=o>.</span><span class=n>add_child</span><span class=p>(</span><span class=s1>&#39;li&#39;</span><span class=p>,</span> <span class=s1>&#39;hello&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>builder</span><span class=o>.</span><span class=n>add_child</span><span class=p>(</span><span class=s1>&#39;li&#39;</span><span class=p>,</span> <span class=s1>&#39;world&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Ordinary builder:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>builder</span><span class=p>)</span>
</span></span></code></pre></div><p>Fluent Builder:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>builder</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>builder</span><span class=o>.</span><span class=n>add_child_fluent</span><span class=p>(</span><span class=s1>&#39;li&#39;</span><span class=p>,</span> <span class=s1>&#39;hello&#39;</span><span class=p>)</span> \
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>add_child_fluent</span><span class=p>(</span><span class=s1>&#39;li&#39;</span><span class=p>,</span> <span class=s1>&#39;world&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Fluent builder:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>builder</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=advanced-builder-pattern-with-multiple-sub-builders>Advanced Builder Pattern with Multiple Sub-Builders<a hidden class=anchor aria-hidden=true href=#advanced-builder-pattern-with-multiple-sub-builders>#</a></h2><p>This example demonstrates an advanced usage of the Builder design pattern, where multiple sub-builders are used to construct different parts of a complex object. Specifically, we use the Builder pattern to construct a Person object, which has two distinct aspects: address and employment information. The challenge is to allow the construction of this object using separate builders in a fluent and cohesive manner.</p><h3 id=key-concepts>Key Concepts<a hidden class=anchor aria-hidden=true href=#key-concepts>#</a></h3><ul><li>Sub-Builders:<ul><li><code>PersonJobBuilder</code> and <code>PersonAddressBuilder</code> are sub-builders that inherit from PersonBuilder.</li><li>Each sub-builder is responsible for a specific aspect of the <code>Person</code> object.</li></ul></li><li>Fluent Interface:<ul><li>The builder methods return self, allowing method chaining.</li><li>This enables a concise and readable way to build the object, e.g., <code>pb.lives.at(...).in_city(...).works.at(...).as_a(...).build()</code>.</li></ul></li><li>Base Builder:<ul><li><code>PersonBuilder</code> acts as a common interface that initializes a <code>Person</code> object and provides access to the sub-builders via the <code>lives</code> and <code>works</code> properties.</li></ul></li><li>Property-Driven Interface:<ul><li>The lives and works properties in <code>PersonBuilder</code> return instances of <code>PersonAddressBuilder</code> and <code>PersonJobBuilder</code>, respectively.</li><li>This design allows seamless switching between the different aspects of the object being built.</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Person</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Creating an instance of Person&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=n>address</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>street_address</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>postcode</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>city</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>         <span class=n>employment</span> <span class=n>info</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>company_name</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>position</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>annual_income</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=sa>f</span><span class=s2>&#34;Address: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>street_address</span><span class=si>}</span><span class=s2>, </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>postcode</span><span class=si>}</span><span class=s2>, </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>city</span><span class=si>}</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=o>+</span> <span class=sa>f</span><span class=s2>&#34;Employed at </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>company_name</span><span class=si>}</span><span class=s2> as a </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>position</span><span class=si>}</span><span class=s2> earning </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>annual_income</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PersonBuilder</span><span class=p>:</span>   <span class=n>facade</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>person</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>person</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>person</span> <span class=o>=</span> <span class=n>Person</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>person</span> <span class=o>=</span> <span class=n>person</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>lives</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>PersonAddressBuilder</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>person</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>works</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>PersonJobBuilder</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>person</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>build</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>person</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PersonJobBuilder</span><span class=p>(</span><span class=n>PersonBuilder</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>person</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>person</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>at</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>company_name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>person</span><span class=o>.</span><span class=n>company_name</span> <span class=o>=</span> <span class=n>company_name</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>as_a</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>position</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>person</span><span class=o>.</span><span class=n>position</span> <span class=o>=</span> <span class=n>position</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>earning</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>annual_income</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>person</span><span class=o>.</span><span class=n>annual_income</span> <span class=o>=</span> <span class=n>annual_income</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PersonAddressBuilder</span><span class=p>(</span><span class=n>PersonBuilder</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>person</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>person</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>at</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>street_address</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>person</span><span class=o>.</span><span class=n>street_address</span> <span class=o>=</span> <span class=n>street_address</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>with_postcode</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>postcode</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>person</span><span class=o>.</span><span class=n>postcode</span> <span class=o>=</span> <span class=n>postcode</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>in_city</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>city</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>person</span><span class=o>.</span><span class=n>city</span> <span class=o>=</span> <span class=n>city</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>pb</span> <span class=o>=</span> <span class=n>PersonBuilder</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>p</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>pb</span><span class=o>.</span><span class=n>lives</span><span class=o>.</span><span class=n>at</span><span class=p>(</span><span class=s2>&#34;123 London Road&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=n>in_city</span><span class=p>(</span><span class=s2>&#34;London&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=n>with_postcode</span><span class=p>(</span><span class=s2>&#34;SW12BC&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=n>works</span><span class=o>.</span><span class=n>at</span><span class=p>(</span><span class=s2>&#34;Fabrikam&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=n>as_a</span><span class=p>(</span><span class=s2>&#34;Engineer&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=n>earning</span><span class=p>(</span><span class=mi>123000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=n>build</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>p</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=usage>Usage<a hidden class=anchor aria-hidden=true href=#usage>#</a></h3><p>The example demonstrates the usage of a PersonBuilder to build a Person object with both address and employment information. The fluent interface allows easy chaining of method calls, and the properties lives and works provide access to the sub-builders for address and employment, respectively.</p><p>This setup is particularly useful when constructing complex objects that require multiple, distinct building processes, while maintaining a clean and intuitive API for the end user.</p><h2 id=builder-pattern-using-inheritance-with-openclosed-principle>Builder Pattern Using Inheritance with Open/Closed Principle<a hidden class=anchor aria-hidden=true href=#builder-pattern-using-inheritance-with-openclosed-principle>#</a></h2><p>This example demonstrates an alternative approach to the Builder pattern that leverages inheritance to extend functionality. This approach addresses the violation of the Open/Closed Principle observed in traditional builder patterns, where adding new features requires modifying the original builder class. By using inheritance, new builders can be created that extend the functionality of existing ones without altering the existing code, thereby adhering to the Open/Closed Principle.</p><h3 id=key-concepts-1>Key Concepts<a hidden class=anchor aria-hidden=true href=#key-concepts-1>#</a></h3><ul><li>Inheritance-Based Builders:<ul><li>Instead of having multiple sub-builders within a single builder class, each additional piece of functionality is added through inheritance.</li><li>This method allows you to extend the builder&rsquo;s capabilities by creating new classes that inherit from existing builders, adding only the necessary functionality.</li></ul></li><li>Open/Closed Principle:<ul><li>The Open/Closed Principle states that software entities should be open for extension but closed for modification.</li><li>In this pattern, once a builder class is created, it does not need to be modified to add new features. Instead, new builder classes are created by inheriting from the existing ones.</li></ul></li><li>Fluent Interface:<ul><li>The builder classes use a fluent interface, returning self from methods to allow method chaining.</li><li>This results in a clear and readable way to construct the Person object.</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Person</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>position</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>date_of_birth</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s1> born on </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>date_of_birth</span><span class=si>}</span><span class=s1> works as a </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>position</span><span class=si>}</span><span class=s1>&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@staticmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>new</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>PersonBuilder</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PersonBuilder</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>person</span> <span class=o>=</span> <span class=n>Person</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>build</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>person</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PersonInfoBuilder</span><span class=p>(</span><span class=n>PersonBuilder</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>called</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>person</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PersonJobBuilder</span><span class=p>(</span><span class=n>PersonInfoBuilder</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>works_as_a</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>position</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>person</span><span class=o>.</span><span class=n>position</span> <span class=o>=</span> <span class=n>position</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PersonBirthDateBuilder</span><span class=p>(</span><span class=n>PersonJobBuilder</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>born</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>date_of_birth</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>person</span><span class=o>.</span><span class=n>date_of_birth</span> <span class=o>=</span> <span class=n>date_of_birth</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>pb</span> <span class=o>=</span> <span class=n>PersonBirthDateBuilder</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>me</span> <span class=o>=</span> <span class=n>pb</span>\
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=n>called</span><span class=p>(</span><span class=s1>&#39;Dmitri&#39;</span><span class=p>)</span>\
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=n>works_as_a</span><span class=p>(</span><span class=s1>&#39;quant&#39;</span><span class=p>)</span>\
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=n>born</span><span class=p>(</span><span class=s1>&#39;1/1/1980&#39;</span><span class=p>)</span>\
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=n>build</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>me</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=usage-1>Usage<a hidden class=anchor aria-hidden=true href=#usage-1>#</a></h3><p>In this example, the Person object is constructed by chaining method calls on a PersonBirthDateBuilder instance, which is the most derived builder in the hierarchy. The inheritance-based approach ensures that each builder in the hierarchy can add specific attributes to the Person object while still allowing all the previously added attributes to be set.</p><p>This design allows for a flexible and extendable building process. If new attributes or methods are needed in the future, they can be added by simply creating a new builder that inherits from the appropriate existing builder, ensuring that the Open/Closed Principle is maintained throughout the development process.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://raghu-vijaykumar.github.io/blog/tags/system-design/>System-Design</a></li><li><a href=https://raghu-vijaykumar.github.io/blog/tags/software-architecture/>Software-Architecture</a></li><li><a href=https://raghu-vijaykumar.github.io/blog/tags/patterns/>Patterns</a></li><li><a href=https://raghu-vijaykumar.github.io/blog/tags/builder/>Builder</a></li></ul><nav class=paginav><a class=prev href=https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/bridge/readme/><span class=title>« Prev</span><br><span>Bridge Pattern</span>
</a><a class=next href=https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/composite/readme/><span class=title>Next »</span><br><span>Composite Pattern</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://raghu-vijaykumar.github.io/blog/>Raghu Vijaykumar</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>