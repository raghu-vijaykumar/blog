<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Composite Pattern | Raghu Vijaykumar</title>
<meta name=keywords content="system-design,software-architecture,patterns,composite"><meta name=description content="The Composite Design Pattern is a structural design pattern that allows you to treat individual objects and compositions of objects uniformly. This pattern provides a way to group objects into tree structures to represent part-whole hierarchies. Composite lets clients treat individual objects and compositions of objects uniformly, thereby simplifying the client code.
Motivation In software development, there are scenarios where you need to work with both individual objects and collections of objects."><meta name=author content="Me"><link rel=canonical href=https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/composite/readme/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.e7c811b1152f0ea0017b0724f2c040700cf8bf84343fd4fd5eca45af82337db9.css integrity="sha256-58gRsRUvDqABewck8sBAcAz4v4Q0P9T9XspFr4Izfbk=" rel="preload stylesheet" as=style><link rel=icon href=https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/composite/readme/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Composite Pattern"><meta property="og:description" content="The Composite Design Pattern is a structural design pattern that allows you to treat individual objects and compositions of objects uniformly. This pattern provides a way to group objects into tree structures to represent part-whole hierarchies. Composite lets clients treat individual objects and compositions of objects uniformly, thereby simplifying the client code.
Motivation In software development, there are scenarios where you need to work with both individual objects and collections of objects."><meta property="og:type" content="article"><meta property="og:url" content="https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/composite/readme/"><meta property="og:image" content="https://raghu-vijaykumar.github.io/blog/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="docs"><meta property="article:published_time" content="2024-08-24T14:46:15+00:00"><meta property="article:modified_time" content="2024-08-24T14:46:15+00:00"><meta property="og:site_name" content="Raghu Vijaykumar"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://raghu-vijaykumar.github.io/blog/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Composite Pattern"><meta name=twitter:description content="The Composite Design Pattern is a structural design pattern that allows you to treat individual objects and compositions of objects uniformly. This pattern provides a way to group objects into tree structures to represent part-whole hierarchies. Composite lets clients treat individual objects and compositions of objects uniformly, thereby simplifying the client code.
Motivation In software development, there are scenarios where you need to work with both individual objects and collections of objects."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Docs","item":"https://raghu-vijaykumar.github.io/blog/docs/"},{"@type":"ListItem","position":2,"name":"Composite Pattern","item":"https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/composite/readme/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Composite Pattern","name":"Composite Pattern","description":"The Composite Design Pattern is a structural design pattern that allows you to treat individual objects and compositions of objects uniformly. This pattern provides a way to group objects into tree structures to represent part-whole hierarchies. Composite lets clients treat individual objects and compositions of objects uniformly, thereby simplifying the client code.\nMotivation In software development, there are scenarios where you need to work with both individual objects and collections of objects.","keywords":["system-design","software-architecture","patterns","composite"],"articleBody":"The Composite Design Pattern is a structural design pattern that allows you to treat individual objects and compositions of objects uniformly. This pattern provides a way to group objects into tree structures to represent part-whole hierarchies. Composite lets clients treat individual objects and compositions of objects uniformly, thereby simplifying the client code.\nMotivation In software development, there are scenarios where you need to work with both individual objects and collections of objects. For example, in a graphics application, you might have simple shapes like circles and squares, but you might also want to group these shapes together to form complex structures.\nThe Composite Design Pattern enables you to treat both individual objects (e.g., a circle or a square) and groups of objects (e.g., a group of shapes) uniformly. This pattern allows you to define a common interface for all objects in the composition, so clients can interact with both individual components and composites through the same interface.\nImplementation Base Class The base class, GraphicObject, serves as the foundation for both individual components (e.g., Circle and Square) and composite objects (e.g., a group of shapes). It contains a list of children that represent the group of objects and a color property.\nclass GraphicObject: def __init__(self, color=None): self.color = color self.children = [] self._name = 'Group' @property def name(self): return self._name def _print(self, items, depth): items.append('*' * depth) if self.color: items.append(self.color) items.append(f'{self.name}\\n') for child in self.children: child._print(items, depth + 1) def __str__(self): items = [] self._print(items, 0) return ''.join(items) Concrete Classes Concrete classes like Circle and Square inherit from GraphicObject and override the name property to return their specific type. These classes can be treated as both individual objects and as part of a composite object.\nclass Circle(GraphicObject): @property def name(self): return 'Circle' class Square(GraphicObject): @property def name(self): return 'Square' Example Usage Below is an example of how you can use the Composite Design Pattern to create and manipulate both individual shapes and groups of shapes.\nif __name__ == '__main__': drawing = GraphicObject() drawing._name = 'My Drawing' drawing.children.append(Square('Red')) drawing.children.append(Circle('Yellow')) group = GraphicObject() # no name group.children.append(Circle('Blue')) group.children.append(Square('Blue')) drawing.children.append(group) print(drawing) Output The output of the above code will display a hierarchy of the shapes and groups within the drawing:\n*My Drawing **Red **Square **Yellow **Circle **Group ***Blue ***Circle ***Blue ***Square Neural Network Example This documentation describes an implementation of the Composite Design Pattern in the context of modeling a neural network. The pattern is used to treat individual neurons and layers of neurons uniformly, allowing them to be connected seamlessly. This approach simplifies the handling of connections within a neural network by making scalar elements behave like collections.\nKey Components Connectable Class Purpose: Provides a base class that allows any derived class to connect to other instances of Connectable. Implements the Iterable interface, enabling the uniform treatment of single elements and collections. Methods: connect_to(self, other): Connects the current instance (self) to another Connectable instance (other). Iterates over elements of self and other, creating two-way connections between them. iter(self): Defines iteration over instances, yielding self in the case of scalar objects. Neuron Class Purpose: Represents a single neuron within a neural network. Inherits from Connectable to enable connections with other neurons or layers of neurons. Attributes: name: The name of the neuron. inputs: A list of neurons connected as inputs to this neuron. outputs: A list of neurons connected as outputs from this neuron. Methods: init(self, name): Initializes a neuron with a name, and empty input/output lists. str(self): Returns a string representation of the neuron, including its name, the number of inputs, and the number of outputs. NeuronLayer Class Purpose: Represents a layer of neurons. Inherits from both list and Connectable, allowing it to behave like a list of neurons while also supporting connections. Attributes: name: The name of the neuron layer. Methods: init(self, name, count): Initializes a neuron layer with a specified number of neurons. Each neuron in the layer is named according to the layer’s name and its index. str(self): Returns a string representation of the neuron layer, including its name and the number of neurons it contains. Example Usage Connecting Neurons and Layers The following code demonstrates how to create neurons and layers, and connect them using the connect_to method:\nif __name__ == '__main__': neuron1 = Neuron('n1') neuron2 = Neuron('n2') layer1 = NeuronLayer('L1', 3) layer2 = NeuronLayer('L2', 4) neuron1.connect_to(neuron2) neuron1.connect_to(layer1) layer1.connect_to(neuron2) layer1.connect_to(layer2) print(neuron1) print(neuron2) print(layer1) print(layer2) Output This example produces the following output:\nn1, 0 inputs, 4 outputs n2, 4 inputs, 0 outputs L1 with 3 neurons L2 with 4 neurons Explanation Neuron 1 (n1) is connected to Neuron 2 (n2) and Layer 1 (L1). This results in n1 having 4 outputs (3 to L1 and 1 to n2), while n2 has 4 inputs (3 from L1 and 1 from n1). Layer 1 (L1) is connected to Layer 2 (L2), creating connections between all neurons in L1 and L2. The connect_to method in Connectable enables this flexibility, allowing neurons and layers to be interconnected regardless of their types. ","wordCount":"827","inLanguage":"en","image":"https://raghu-vijaykumar.github.io/blog/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-08-24T14:46:15Z","dateModified":"2024-08-24T14:46:15Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/composite/readme/"},"publisher":{"@type":"Organization","name":"Raghu Vijaykumar","logo":{"@type":"ImageObject","url":"https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://raghu-vijaykumar.github.io/blog/ accesskey=h title="Raghu Vijaykumar (Alt + H)"><img src=https://raghu-vijaykumar.github.io/apple-touch-icon.png alt aria-label=logo height=35>Raghu Vijaykumar</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://raghu-vijaykumar.github.io/blog/about/ title=about><span>about</span></a></li><li><a href=https://raghu-vijaykumar.github.io/blog/docs/ title=docs><span>docs</span></a></li><li><a href=https://raghu-vijaykumar.github.io/blog/posts/ title=posts><span>posts</span></a></li><li><a href=https://raghu-vijaykumar.github.io/blog/sponsor/ title=sponsor><span>sponsor</span></a></li><li><a href=https://raghu-vijaykumar.github.io/blog/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://raghu-vijaykumar.github.io/blog/>Home</a>&nbsp;»&nbsp;<a href=https://raghu-vijaykumar.github.io/blog/docs/>Docs</a></div><h1 class="post-title entry-hint-parent">Composite Pattern</h1><div class=post-meta><span title='2024-08-24 14:46:15.95124139 +0000 UTC'>August 24, 2024</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;827 words&nbsp;·&nbsp;Me</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#motivation>Motivation</a></li><li><a href=#implementation>Implementation</a><ul><li><a href=#base-class>Base Class</a></li><li><a href=#concrete-classes>Concrete Classes</a></li><li><a href=#example-usage>Example Usage</a></li><li><a href=#output>Output</a></li></ul></li><li><a href=#neural-network-example>Neural Network Example</a><ul><li><a href=#key-components>Key Components</a></li><li><a href=#example-usage-1>Example Usage</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>The Composite Design Pattern is a structural design pattern that allows you to treat individual objects and compositions of objects uniformly. This pattern provides a way to group objects into tree structures to represent part-whole hierarchies. Composite lets clients treat individual objects and compositions of objects uniformly, thereby simplifying the client code.</p><h2 id=motivation>Motivation<a hidden class=anchor aria-hidden=true href=#motivation>#</a></h2><p>In software development, there are scenarios where you need to work with both individual objects and collections of objects. For example, in a graphics application, you might have simple shapes like circles and squares, but you might also want to group these shapes together to form complex structures.</p><p>The Composite Design Pattern enables you to treat both individual objects (e.g., a circle or a square) and groups of objects (e.g., a group of shapes) uniformly. This pattern allows you to define a common interface for all objects in the composition, so clients can interact with both individual components and composites through the same interface.</p><h2 id=implementation>Implementation<a hidden class=anchor aria-hidden=true href=#implementation>#</a></h2><h3 id=base-class>Base Class<a hidden class=anchor aria-hidden=true href=#base-class>#</a></h3><p>The base class, GraphicObject, serves as the foundation for both individual components (e.g., Circle and Square) and composite objects (e.g., a group of shapes). It contains a list of children that represent the group of objects and a color property.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=k>class</span> <span class=nc>GraphicObject</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>color</span> <span class=o>=</span> <span class=n>color</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>children</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_name</span> <span class=o>=</span> <span class=s1>&#39;Group&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_name</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_print</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>items</span><span class=p>,</span> <span class=n>depth</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s1>&#39;*&#39;</span> <span class=o>*</span> <span class=n>depth</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>color</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>color</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>child</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>children</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>child</span><span class=o>.</span><span class=n>_print</span><span class=p>(</span><span class=n>items</span><span class=p>,</span> <span class=n>depth</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>items</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_print</span><span class=p>(</span><span class=n>items</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s1>&#39;&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>items</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=concrete-classes>Concrete Classes<a hidden class=anchor aria-hidden=true href=#concrete-classes>#</a></h3><p>Concrete classes like Circle and Square inherit from GraphicObject and override the name property to return their specific type. These classes can be treated as both individual objects and as part of a composite object.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=k>class</span> <span class=nc>Circle</span><span class=p>(</span><span class=n>GraphicObject</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s1>&#39;Circle&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Square</span><span class=p>(</span><span class=n>GraphicObject</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s1>&#39;Square&#39;</span>
</span></span></code></pre></div><h3 id=example-usage>Example Usage<a hidden class=anchor aria-hidden=true href=#example-usage>#</a></h3><p>Below is an example of how you can use the Composite Design Pattern to create and manipulate both individual shapes and groups of shapes.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>drawing</span> <span class=o>=</span> <span class=n>GraphicObject</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>drawing</span><span class=o>.</span><span class=n>_name</span> <span class=o>=</span> <span class=s1>&#39;My Drawing&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>drawing</span><span class=o>.</span><span class=n>children</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>Square</span><span class=p>(</span><span class=s1>&#39;Red&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>drawing</span><span class=o>.</span><span class=n>children</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>Circle</span><span class=p>(</span><span class=s1>&#39;Yellow&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>group</span> <span class=o>=</span> <span class=n>GraphicObject</span><span class=p>()</span>  <span class=c1># no name</span>
</span></span><span class=line><span class=cl>    <span class=n>group</span><span class=o>.</span><span class=n>children</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>Circle</span><span class=p>(</span><span class=s1>&#39;Blue&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>group</span><span class=o>.</span><span class=n>children</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>Square</span><span class=p>(</span><span class=s1>&#39;Blue&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>drawing</span><span class=o>.</span><span class=n>children</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>group</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>drawing</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=output>Output<a hidden class=anchor aria-hidden=true href=#output>#</a></h3><p>The output of the above code will display a hierarchy of the shapes and groups within the drawing:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>*My Drawing
</span></span><span class=line><span class=cl>**Red
</span></span><span class=line><span class=cl>**Square
</span></span><span class=line><span class=cl>**Yellow
</span></span><span class=line><span class=cl>**Circle
</span></span><span class=line><span class=cl>**Group
</span></span><span class=line><span class=cl>***Blue
</span></span><span class=line><span class=cl>***Circle
</span></span><span class=line><span class=cl>***Blue
</span></span><span class=line><span class=cl>***Square
</span></span></code></pre></div><h2 id=neural-network-example>Neural Network Example<a hidden class=anchor aria-hidden=true href=#neural-network-example>#</a></h2><p>This documentation describes an implementation of the Composite Design Pattern in the context of modeling a neural network. The pattern is used to treat individual neurons and layers of neurons uniformly, allowing them to be connected seamlessly. This approach simplifies the handling of connections within a neural network by making scalar elements behave like collections.</p><h3 id=key-components>Key Components<a hidden class=anchor aria-hidden=true href=#key-components>#</a></h3><ol><li>Connectable Class</li></ol><ul><li>Purpose: Provides a base class that allows any derived class to connect to other instances of Connectable. Implements the Iterable interface, enabling the uniform treatment of single elements and collections.</li><li>Methods:<ul><li>connect_to(self, other): Connects the current instance (self) to another Connectable instance (other). Iterates over elements of self and other, creating two-way connections between them.</li><li><strong>iter</strong>(self): Defines iteration over instances, yielding self in the case of scalar objects.</li></ul></li></ul><ol start=2><li>Neuron Class</li></ol><ul><li>Purpose: Represents a single neuron within a neural network. Inherits from Connectable to enable connections with other neurons or layers of neurons.</li><li>Attributes:<ul><li>name: The name of the neuron.</li><li>inputs: A list of neurons connected as inputs to this neuron.</li><li>outputs: A list of neurons connected as outputs from this neuron.</li></ul></li><li>Methods:<ul><li><strong>init</strong>(self, name): Initializes a neuron with a name, and empty input/output lists.</li><li><strong>str</strong>(self): Returns a string representation of the neuron, including its name, the number of inputs, and the number of outputs.</li></ul></li></ul><ol start=3><li>NeuronLayer Class</li></ol><ul><li>Purpose: Represents a layer of neurons. Inherits from both list and Connectable, allowing it to behave like a list of neurons while also supporting connections.</li><li>Attributes:<ul><li>name: The name of the neuron layer.</li></ul></li><li>Methods:<ul><li><strong>init</strong>(self, name, count): Initializes a neuron layer with a specified number of neurons. Each neuron in the layer is named according to the layer&rsquo;s name and its index.</li><li><strong>str</strong>(self): Returns a string representation of the neuron layer, including its name and the number of neurons it contains.</li></ul></li></ul><h3 id=example-usage-1>Example Usage<a hidden class=anchor aria-hidden=true href=#example-usage-1>#</a></h3><h4 id=connecting-neurons-and-layers>Connecting Neurons and Layers<a hidden class=anchor aria-hidden=true href=#connecting-neurons-and-layers>#</a></h4><p>The following code demonstrates how to create neurons and layers, and connect them using the connect_to method:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>neuron1</span> <span class=o>=</span> <span class=n>Neuron</span><span class=p>(</span><span class=s1>&#39;n1&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>neuron2</span> <span class=o>=</span> <span class=n>Neuron</span><span class=p>(</span><span class=s1>&#39;n2&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>layer1</span> <span class=o>=</span> <span class=n>NeuronLayer</span><span class=p>(</span><span class=s1>&#39;L1&#39;</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>layer2</span> <span class=o>=</span> <span class=n>NeuronLayer</span><span class=p>(</span><span class=s1>&#39;L2&#39;</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>neuron1</span><span class=o>.</span><span class=n>connect_to</span><span class=p>(</span><span class=n>neuron2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>neuron1</span><span class=o>.</span><span class=n>connect_to</span><span class=p>(</span><span class=n>layer1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>layer1</span><span class=o>.</span><span class=n>connect_to</span><span class=p>(</span><span class=n>neuron2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>layer1</span><span class=o>.</span><span class=n>connect_to</span><span class=p>(</span><span class=n>layer2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>neuron1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>neuron2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>layer1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>layer2</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=output-1>Output<a hidden class=anchor aria-hidden=true href=#output-1>#</a></h4><p>This example produces the following output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>n1, <span class=m>0</span> inputs, <span class=m>4</span> outputs
</span></span><span class=line><span class=cl>n2, <span class=m>4</span> inputs, <span class=m>0</span> outputs
</span></span><span class=line><span class=cl>L1 with <span class=m>3</span> neurons
</span></span><span class=line><span class=cl>L2 with <span class=m>4</span> neurons
</span></span></code></pre></div><h4 id=explanation>Explanation<a hidden class=anchor aria-hidden=true href=#explanation>#</a></h4><ul><li>Neuron 1 (n1) is connected to Neuron 2 (n2) and Layer 1 (L1). This results in n1 having 4 outputs (3 to L1 and 1 to n2), while n2 has 4 inputs (3 from L1 and 1 from n1).</li><li>Layer 1 (L1) is connected to Layer 2 (L2), creating connections between all neurons in L1 and L2.</li><li>The connect_to method in Connectable enables this flexibility, allowing neurons and layers to be interconnected regardless of their types.</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://raghu-vijaykumar.github.io/blog/tags/system-design/>System-Design</a></li><li><a href=https://raghu-vijaykumar.github.io/blog/tags/software-architecture/>Software-Architecture</a></li><li><a href=https://raghu-vijaykumar.github.io/blog/tags/patterns/>Patterns</a></li><li><a href=https://raghu-vijaykumar.github.io/blog/tags/composite/>Composite</a></li></ul><nav class=paginav><a class=prev href=https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/builder/readme/><span class=title>« Prev</span><br><span>Builder Pattern</span>
</a><a class=next href=https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/decorator/readme/><span class=title>Next »</span><br><span>Decorator Pattern</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://raghu-vijaykumar.github.io/blog/>Raghu Vijaykumar</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>