<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Factory Pattern | Raghu Vijaykumar</title>
<meta name=keywords content="system-design,software-architecture,patterns,factory"><meta name=description content="Factory Method and Factory Class Implementation The Factory Method and the Factory Class design patterns, which are essential for creating objects in a way that is both flexible and adheres to object-oriented principles like the Single Responsibility Principle and Open/Closed Principle.
The discussion begins by introducing a simple Point class and evolves into explaining how to initialize points using both Cartesian and Polar coordinates while maintaining clean and understandable code."><meta name=author content="Me"><link rel=canonical href=https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/factory/readme/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.e7c811b1152f0ea0017b0724f2c040700cf8bf84343fd4fd5eca45af82337db9.css integrity="sha256-58gRsRUvDqABewck8sBAcAz4v4Q0P9T9XspFr4Izfbk=" rel="preload stylesheet" as=style><link rel=icon href=https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/factory/readme/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Factory Pattern"><meta property="og:description" content="Factory Method and Factory Class Implementation The Factory Method and the Factory Class design patterns, which are essential for creating objects in a way that is both flexible and adheres to object-oriented principles like the Single Responsibility Principle and Open/Closed Principle.
The discussion begins by introducing a simple Point class and evolves into explaining how to initialize points using both Cartesian and Polar coordinates while maintaining clean and understandable code."><meta property="og:type" content="article"><meta property="og:url" content="https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/factory/readme/"><meta property="og:image" content="https://raghu-vijaykumar.github.io/blog/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="docs"><meta property="article:published_time" content="2024-08-26T00:01:00+05:30"><meta property="article:modified_time" content="2024-08-26T00:01:00+05:30"><meta property="og:site_name" content="Raghu Vijaykumar"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://raghu-vijaykumar.github.io/blog/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Factory Pattern"><meta name=twitter:description content="Factory Method and Factory Class Implementation The Factory Method and the Factory Class design patterns, which are essential for creating objects in a way that is both flexible and adheres to object-oriented principles like the Single Responsibility Principle and Open/Closed Principle.
The discussion begins by introducing a simple Point class and evolves into explaining how to initialize points using both Cartesian and Polar coordinates while maintaining clean and understandable code."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Docs","item":"https://raghu-vijaykumar.github.io/blog/docs/"},{"@type":"ListItem","position":2,"name":"Factory Pattern","item":"https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/factory/readme/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Factory Pattern","name":"Factory Pattern","description":"Factory Method and Factory Class Implementation The Factory Method and the Factory Class design patterns, which are essential for creating objects in a way that is both flexible and adheres to object-oriented principles like the Single Responsibility Principle and Open/Closed Principle.\nThe discussion begins by introducing a simple Point class and evolves into explaining how to initialize points using both Cartesian and Polar coordinates while maintaining clean and understandable code.","keywords":["system-design","software-architecture","patterns","factory"],"articleBody":"Factory Method and Factory Class Implementation The Factory Method and the Factory Class design patterns, which are essential for creating objects in a way that is both flexible and adheres to object-oriented principles like the Single Responsibility Principle and Open/Closed Principle.\nThe discussion begins by introducing a simple Point class and evolves into explaining how to initialize points using both Cartesian and Polar coordinates while maintaining clean and understandable code.\nFactory Method Pattern The Factory Method is a design pattern that provides an alternative to using constructors (initializers) directly for object creation. It allows for the creation of objects without specifying the exact class of the object that will be created.\nProblem Statement: Initially, the Point class is designed to accept Cartesian coordinates (x, y). However, if we want to add support for polar coordinates (rho, theta), we encounter issues:\nRedefining the constructor for different coordinate systems isn’t possible. Expanding the constructor to handle multiple coordinate systems can lead to cluttered and complex code, breaking the Single Responsibility Principle. Solution: Instead of overloading or expanding the constructor, we can create factory methods:\nFactory methods are static methods that handle the creation of objects with different initialization requirements. These methods clearly indicate the type of initialization (Cartesian or Polar) and keep the initialization logic encapsulated. from enum import Enum from math import * class CoordinateSystem(Enum): CARTESIAN = 1 POLAR = 2 class Point: def __init__(self, a, b, system=CoordinateSystem.CARTESIAN): if system == CoordinateSystem.CARTESIAN: self.x = a self.y = b elif system == CoordinateSystem.POLAR: self.x = a * sin(b) self.y = a * cos(b) def __str__(self): return f'x: {self.x}, y: {self.y}' @staticmethod def new_cartesian_point(x, y): return Point(x, y) @staticmethod def new_polar_point(rho, theta): return Point(rho * sin(theta), rho * cos(theta)) In this implementation: new_cartesian_point(x, y) and new_polar_point(rho, theta) are static factory methods that create a Point object based on the coordinate system.\nFactory Class Pattern A Factory Class centralizes the creation logic of related objects. When a class starts accumulating too many factory methods, it’s often a good idea to move these methods into a separate class.\nProblem Statement As the number of factory methods grows, the Point class might become cluttered. This violates the Single Responsibility Principle as the class is handling both the creation and representation of points.\nSolution Extract the factory methods into a separate PointFactory class:\nThis class will be responsible for the creation of Point objects. This separation ensures that the Point class only focuses on representing a point, while the factory handles object creation. class PointFactory: @staticmethod def new_cartesian_point(x, y): return Point(x, y) @staticmethod def new_polar_point(rho, theta): return Point(rho * sin(theta), rho * cos(theta)) In the PointFactory class: new_cartesian_point(x, y) and new_polar_point(rho, theta) methods are moved here, separating concerns.\nUsage if __name__ == '__main__': p1 = Point(2, 3, CoordinateSystem.CARTESIAN) p2 = PointFactory.new_cartesian_point(1, 2) p3 = Point.Factory.new_cartesian_point(5, 6) # Using nested factory class p4 = Point.factory.new_cartesian_point(7, 8) # Singleton factory instance print(p1, p2, p3, p4) In this example:\nPointFactory.new_cartesian_point(1, 2) creates a Cartesian point using the factory class. Point.factory.new_cartesian_point(7, 8) demonstrates using a singleton factory instance. Abstract Factory Design Pattern Implementation The abstract factory design pattern allows for the creation of families of related objects without specifying their concrete classes. This implementation demonstrates how to use abstract factories to create different types of drinks (e.g., tea and coffee) using a vending machine scenario.\nStep-by-Step Implementation HotDrink Abstract Base Class: An abstract base class HotDrink is defined with an abstract method consume. Concrete drink classes (e.g., Tea, Coffee) inherit from this base class and implement the consume method. Concrete Drink Classes: Two concrete classes, Tea and Coffee, inherit from HotDrink and provide specific implementations of the consume method. HotDrinkFactory Abstract Base Class: An abstract base class HotDrinkFactory is defined with a method prepare. This method is meant to be overridden by concrete factory classes to prepare specific types of drinks. Concrete Factory Classes: Two concrete factory classes, TeaFactory and CoffeeFactory, inherit from HotDrinkFactory. These classes implement the prepare method to create instances of Tea and Coffee, respectively. HotDrinkMachine Class: The HotDrinkMachine class simulates a vending machine that can prepare different types of drinks. It uses an enumeration AvailableDrink to list available drink types. The machine maintains a list of factory instances for each drink type. Drink Preparation: The make_drink method in HotDrinkMachine allows the user to select a drink type and specify the amount. The corresponding factory prepares the drink, and the consume method is called to simulate drinking it. from abc import ABC from enum import Enum, auto # Abstract base class for drinks class HotDrink(ABC): def consume(self): pass # Concrete drink classes class Tea(HotDrink): def consume(self): print('This tea is nice but I\\'d prefer it with milk') class Coffee(HotDrink): def consume(self): print('This coffee is delicious') # Abstract base class for drink factories class HotDrinkFactory(ABC): def prepare(self, amount): pass # Concrete factory classes class TeaFactory(HotDrinkFactory): def prepare(self, amount): print(f'Put in tea bag, boil water, pour {amount}ml, enjoy!') return Tea() class CoffeeFactory(HotDrinkFactory): def prepare(self, amount): print(f'Grind some beans, boil water, pour {amount}ml, enjoy!') return Coffee() # Vending machine class for preparing drinks class HotDrinkMachine: class AvailableDrink(Enum): # Lists available drinks COFFEE = auto() TEA = auto() factories = [] initialized = False def __init__(self): if not self.initialized: self.initialized = True for d in self.AvailableDrink: name = d.name[0] + d.name[1:].lower() factory_name = name + 'Factory' factory_instance = eval(factory_name)() self.factories.append((name, factory_instance)) def make_drink(self): print('Available drinks:') for f in self.factories: print(f[0]) s = input(f'Please pick drink (0-{len(self.factories)-1}): ') idx = int(s) s = input(f'Specify amount: ') amount = int(s) return self.factories[idx][1].prepare(amount) # Standalone function to prepare drinks def make_drink(type): if type == 'tea': return TeaFactory().prepare(200) elif type == 'coffee': return CoffeeFactory().prepare(50) else: return None # Main function to demonstrate the vending machine if __name__ == '__main__': hdm = HotDrinkMachine() drink = hdm.make_drink() drink.consume() Key Concepts Abstract Base Classes (ABC): Used to define a common interface for a group of related objects. Concrete Implementations: Specific classes that implement the abstract methods defined in the base classes. Factory Pattern: A design pattern used to create objects without specifying the exact class of the object that will be created. Duck Typing: Python’s dynamic typing feature where the type of an object is determined by its behavior (methods and properties) rather than its inheritance from a specific class. This pattern is particularly useful in scenarios where you need to create families of related objects and want to ensure that the objects are created in a consistent manner.\n","wordCount":"1069","inLanguage":"en","image":"https://raghu-vijaykumar.github.io/blog/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-08-26T00:01:00+05:30","dateModified":"2024-08-26T00:01:00+05:30","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/factory/readme/"},"publisher":{"@type":"Organization","name":"Raghu Vijaykumar","logo":{"@type":"ImageObject","url":"https://raghu-vijaykumar.github.io/blog/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://raghu-vijaykumar.github.io/blog/ accesskey=h title="Raghu Vijaykumar (Alt + H)"><img src=https://raghu-vijaykumar.github.io/apple-touch-icon.png alt aria-label=logo height=35>Raghu Vijaykumar</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://raghu-vijaykumar.github.io/blog/about/ title=about><span>about</span></a></li><li><a href=https://raghu-vijaykumar.github.io/blog/docs/ title=docs><span>docs</span></a></li><li><a href=https://raghu-vijaykumar.github.io/blog/posts/ title=posts><span>posts</span></a></li><li><a href=https://raghu-vijaykumar.github.io/blog/sponsor/ title=sponsor><span>sponsor</span></a></li><li><a href=https://raghu-vijaykumar.github.io/blog/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://raghu-vijaykumar.github.io/blog/>Home</a>&nbsp;»&nbsp;<a href=https://raghu-vijaykumar.github.io/blog/docs/>Docs</a></div><h1 class="post-title entry-hint-parent">Factory Pattern</h1><div class=post-meta><span title='2024-08-26 00:01:00 +0530 +0530'>August 26, 2024</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1069 words&nbsp;·&nbsp;Me</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#factory-method-and-factory-class-implementation>Factory Method and Factory Class Implementation</a><ul><li><a href=#factory-method-pattern>Factory Method Pattern</a></li><li><a href=#factory-class-pattern>Factory Class Pattern</a></li></ul></li><li><a href=#abstract-factory-design-pattern-implementation>Abstract Factory Design Pattern Implementation</a><ul><li><a href=#step-by-step-implementation>Step-by-Step Implementation</a></li><li><a href=#key-concepts>Key Concepts</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h2 id=factory-method-and-factory-class-implementation>Factory Method and Factory Class Implementation<a hidden class=anchor aria-hidden=true href=#factory-method-and-factory-class-implementation>#</a></h2><p>The Factory Method and the Factory Class design patterns, which are essential for creating objects in a way that is both flexible and adheres to object-oriented principles like the Single Responsibility Principle and Open/Closed Principle.</p><p>The discussion begins by introducing a simple Point class and evolves into explaining how to initialize points using both Cartesian and Polar coordinates while maintaining clean and understandable code.</p><h3 id=factory-method-pattern>Factory Method Pattern<a hidden class=anchor aria-hidden=true href=#factory-method-pattern>#</a></h3><p>The Factory Method is a design pattern that provides an alternative to using constructors (initializers) directly for object creation. It allows for the creation of objects without specifying the exact class of the object that will be created.</p><h4 id=problem-statement>Problem Statement:<a hidden class=anchor aria-hidden=true href=#problem-statement>#</a></h4><p>Initially, the Point class is designed to accept Cartesian coordinates (x, y). However, if we want to add support for polar coordinates (rho, theta), we encounter issues:</p><ul><li>Redefining the constructor for different coordinate systems isn’t possible.</li><li>Expanding the constructor to handle multiple coordinate systems can lead to cluttered and complex code, breaking the Single Responsibility Principle.</li></ul><h4 id=solution>Solution:<a hidden class=anchor aria-hidden=true href=#solution>#</a></h4><p>Instead of overloading or expanding the constructor, we can create factory methods:</p><ul><li>Factory methods are static methods that handle the creation of objects with different initialization requirements.</li><li>These methods clearly indicate the type of initialization (Cartesian or Polar) and keep the initialization logic encapsulated.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>enum</span> <span class=kn>import</span> <span class=n>Enum</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>math</span> <span class=kn>import</span> <span class=o>*</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CoordinateSystem</span><span class=p>(</span><span class=n>Enum</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>CARTESIAN</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>POLAR</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Point</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>system</span><span class=o>=</span><span class=n>CoordinateSystem</span><span class=o>.</span><span class=n>CARTESIAN</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>system</span> <span class=o>==</span> <span class=n>CoordinateSystem</span><span class=o>.</span><span class=n>CARTESIAN</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>x</span> <span class=o>=</span> <span class=n>a</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>y</span> <span class=o>=</span> <span class=n>b</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>system</span> <span class=o>==</span> <span class=n>CoordinateSystem</span><span class=o>.</span><span class=n>POLAR</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>x</span> <span class=o>=</span> <span class=n>a</span> <span class=o>*</span> <span class=n>sin</span><span class=p>(</span><span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>y</span> <span class=o>=</span> <span class=n>a</span> <span class=o>*</span> <span class=n>cos</span><span class=p>(</span><span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sa>f</span><span class=s1>&#39;x: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=si>}</span><span class=s1>, y: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=si>}</span><span class=s1>&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@staticmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>new_cartesian_point</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Point</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@staticmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>new_polar_point</span><span class=p>(</span><span class=n>rho</span><span class=p>,</span> <span class=n>theta</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Point</span><span class=p>(</span><span class=n>rho</span> <span class=o>*</span> <span class=n>sin</span><span class=p>(</span><span class=n>theta</span><span class=p>),</span> <span class=n>rho</span> <span class=o>*</span> <span class=n>cos</span><span class=p>(</span><span class=n>theta</span><span class=p>))</span>
</span></span></code></pre></div><p>In this implementation: new_cartesian_point(x, y) and new_polar_point(rho, theta) are static factory methods that create a Point object based on the coordinate system.</p><h3 id=factory-class-pattern>Factory Class Pattern<a hidden class=anchor aria-hidden=true href=#factory-class-pattern>#</a></h3><p>A Factory Class centralizes the creation logic of related objects. When a class starts accumulating too many factory methods, it&rsquo;s often a good idea to move these methods into a separate class.</p><h4 id=problem-statement-1>Problem Statement<a hidden class=anchor aria-hidden=true href=#problem-statement-1>#</a></h4><p>As the number of factory methods grows, the Point class might become cluttered. This violates the Single Responsibility Principle as the class is handling both the creation and representation of points.</p><h4 id=solution-1>Solution<a hidden class=anchor aria-hidden=true href=#solution-1>#</a></h4><p>Extract the factory methods into a separate PointFactory class:</p><ul><li>This class will be responsible for the creation of Point objects.</li><li>This separation ensures that the Point class only focuses on representing a point, while the factory handles object creation.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>PointFactory</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nd>@staticmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>new_cartesian_point</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Point</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@staticmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>new_polar_point</span><span class=p>(</span><span class=n>rho</span><span class=p>,</span> <span class=n>theta</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Point</span><span class=p>(</span><span class=n>rho</span> <span class=o>*</span> <span class=n>sin</span><span class=p>(</span><span class=n>theta</span><span class=p>),</span> <span class=n>rho</span> <span class=o>*</span> <span class=n>cos</span><span class=p>(</span><span class=n>theta</span><span class=p>))</span>
</span></span></code></pre></div><p>In the PointFactory class: new_cartesian_point(x, y) and new_polar_point(rho, theta) methods are moved here, separating concerns.</p><h4 id=usage>Usage<a hidden class=anchor aria-hidden=true href=#usage>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>p1</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=n>CoordinateSystem</span><span class=o>.</span><span class=n>CARTESIAN</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>p2</span> <span class=o>=</span> <span class=n>PointFactory</span><span class=o>.</span><span class=n>new_cartesian_point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>p3</span> <span class=o>=</span> <span class=n>Point</span><span class=o>.</span><span class=n>Factory</span><span class=o>.</span><span class=n>new_cartesian_point</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>)</span>  <span class=c1># Using nested factory class</span>
</span></span><span class=line><span class=cl>    <span class=n>p4</span> <span class=o>=</span> <span class=n>Point</span><span class=o>.</span><span class=n>factory</span><span class=o>.</span><span class=n>new_cartesian_point</span><span class=p>(</span><span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>)</span>  <span class=c1># Singleton factory instance</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>p1</span><span class=p>,</span> <span class=n>p2</span><span class=p>,</span> <span class=n>p3</span><span class=p>,</span> <span class=n>p4</span><span class=p>)</span>
</span></span></code></pre></div><p>In this example:</p><ul><li>PointFactory.new_cartesian_point(1, 2) creates a Cartesian point using the factory class.</li><li>Point.factory.new_cartesian_point(7, 8) demonstrates using a singleton factory instance.</li></ul><h2 id=abstract-factory-design-pattern-implementation>Abstract Factory Design Pattern Implementation<a hidden class=anchor aria-hidden=true href=#abstract-factory-design-pattern-implementation>#</a></h2><p>The abstract factory design pattern allows for the creation of families of related objects without specifying their concrete classes. This implementation demonstrates how to use abstract factories to create different types of drinks (e.g., tea and coffee) using a vending machine scenario.</p><h3 id=step-by-step-implementation>Step-by-Step Implementation<a hidden class=anchor aria-hidden=true href=#step-by-step-implementation>#</a></h3><ul><li><strong>HotDrink Abstract Base Class</strong>: An abstract base class HotDrink is defined with an abstract method consume. Concrete drink classes (e.g., Tea, Coffee) inherit from this base class and implement the consume method.</li><li><strong>Concrete Drink Classes</strong>: Two concrete classes, Tea and Coffee, inherit from HotDrink and provide specific implementations of the consume method.</li><li><strong>HotDrinkFactory Abstract Base Class</strong>: An abstract base class HotDrinkFactory is defined with a method prepare. This method is meant to be overridden by concrete factory classes to prepare specific types of drinks.</li><li><strong>Concrete Factory Classes</strong>: Two concrete factory classes, TeaFactory and CoffeeFactory, inherit from HotDrinkFactory. These classes implement the prepare method to create instances of Tea and Coffee, respectively.</li><li><strong>HotDrinkMachine Class</strong>: The HotDrinkMachine class simulates a vending machine that can prepare different types of drinks. It uses an enumeration AvailableDrink to list available drink types. The machine maintains a list of factory instances for each drink type.</li><li><strong>Drink Preparation</strong>: The make_drink method in HotDrinkMachine allows the user to select a drink type and specify the amount. The corresponding factory prepares the drink, and the consume method is called to simulate drinking it.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>enum</span> <span class=kn>import</span> <span class=n>Enum</span><span class=p>,</span> <span class=n>auto</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Abstract base class for drinks</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>HotDrink</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>consume</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Concrete drink classes</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Tea</span><span class=p>(</span><span class=n>HotDrink</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>consume</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;This tea is nice but I</span><span class=se>\&#39;</span><span class=s1>d prefer it with milk&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Coffee</span><span class=p>(</span><span class=n>HotDrink</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>consume</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;This coffee is delicious&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Abstract base class for drink factories</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>HotDrinkFactory</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>prepare</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Concrete factory classes</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TeaFactory</span><span class=p>(</span><span class=n>HotDrinkFactory</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>prepare</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Put in tea bag, boil water, pour </span><span class=si>{</span><span class=n>amount</span><span class=si>}</span><span class=s1>ml, enjoy!&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Tea</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CoffeeFactory</span><span class=p>(</span><span class=n>HotDrinkFactory</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>prepare</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Grind some beans, boil water, pour </span><span class=si>{</span><span class=n>amount</span><span class=si>}</span><span class=s1>ml, enjoy!&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Coffee</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Vending machine class for preparing drinks</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>HotDrinkMachine</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>AvailableDrink</span><span class=p>(</span><span class=n>Enum</span><span class=p>):</span>  <span class=c1># Lists available drinks</span>
</span></span><span class=line><span class=cl>        <span class=n>COFFEE</span> <span class=o>=</span> <span class=n>auto</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>TEA</span> <span class=o>=</span> <span class=n>auto</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>factories</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=n>initialized</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>initialized</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>initialized</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>d</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>AvailableDrink</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>name</span> <span class=o>=</span> <span class=n>d</span><span class=o>.</span><span class=n>name</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=n>d</span><span class=o>.</span><span class=n>name</span><span class=p>[</span><span class=mi>1</span><span class=p>:]</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=n>factory_name</span> <span class=o>=</span> <span class=n>name</span> <span class=o>+</span> <span class=s1>&#39;Factory&#39;</span>
</span></span><span class=line><span class=cl>                <span class=n>factory_instance</span> <span class=o>=</span> <span class=nb>eval</span><span class=p>(</span><span class=n>factory_name</span><span class=p>)()</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>factories</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>name</span><span class=p>,</span> <span class=n>factory_instance</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>make_drink</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Available drinks:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>factories</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>s</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Please pick drink (0-</span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>factories</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=si>}</span><span class=s1>): &#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>idx</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>s</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>s</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Specify amount: &#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>amount</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>s</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>factories</span><span class=p>[</span><span class=n>idx</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>prepare</span><span class=p>(</span><span class=n>amount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Standalone function to prepare drinks</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>make_drink</span><span class=p>(</span><span class=nb>type</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>type</span> <span class=o>==</span> <span class=s1>&#39;tea&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>TeaFactory</span><span class=p>()</span><span class=o>.</span><span class=n>prepare</span><span class=p>(</span><span class=mi>200</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=nb>type</span> <span class=o>==</span> <span class=s1>&#39;coffee&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>CoffeeFactory</span><span class=p>()</span><span class=o>.</span><span class=n>prepare</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Main function to demonstrate the vending machine</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>hdm</span> <span class=o>=</span> <span class=n>HotDrinkMachine</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>drink</span> <span class=o>=</span> <span class=n>hdm</span><span class=o>.</span><span class=n>make_drink</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>drink</span><span class=o>.</span><span class=n>consume</span><span class=p>()</span>
</span></span></code></pre></div><h3 id=key-concepts>Key Concepts<a hidden class=anchor aria-hidden=true href=#key-concepts>#</a></h3><ul><li>Abstract Base Classes (ABC): Used to define a common interface for a group of related objects.</li><li>Concrete Implementations: Specific classes that implement the abstract methods defined in the base classes.</li><li>Factory Pattern: A design pattern used to create objects without specifying the exact class of the object that will be created.</li><li>Duck Typing: Python&rsquo;s dynamic typing feature where the type of an object is determined by its behavior (methods and properties) rather than its inheritance from a specific class.</li></ul><p>This pattern is particularly useful in scenarios where you need to create families of related objects and want to ensure that the objects are created in a consistent manner.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://raghu-vijaykumar.github.io/blog/tags/system-design/>System-Design</a></li><li><a href=https://raghu-vijaykumar.github.io/blog/tags/software-architecture/>Software-Architecture</a></li><li><a href=https://raghu-vijaykumar.github.io/blog/tags/patterns/>Patterns</a></li><li><a href=https://raghu-vijaykumar.github.io/blog/tags/factory/>Factory</a></li></ul><nav class=paginav><a class=prev href=https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/facade/readme/><span class=title>« Prev</span><br><span>Facade Pattern</span>
</a><a class=next href=https://raghu-vijaykumar.github.io/blog/docs/system-design/design-patterns/flyweight/readme/><span class=title>Next »</span><br><span>Flyweight Pattern</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://raghu-vijaykumar.github.io/blog/>Raghu Vijaykumar</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>